Name: python
Summary: An interpreted, interactive, object-oriented programming language
Version: 2.7.5
Release: 1
Group: Development/Languages
License: Python
URL: http://www.python.org/
Sources:
    - http://www.python.org/ftp/python/%{version}/Python-%{version}.tar.bz2
Patches:
    - cgi-py-shebang.patch
    - Python-2.2.1-pydocnogui.patch
    - notimestamp.patch
Description: |
    Python is an interpreted, interactive, object-oriented programming
    language often compared to Tcl, Perl, Scheme or Java. Python includes
    modules, classes, exceptions, very high level dynamic data types and
    dynamic typing. Python supports interfaces to many system calls and
    libraries, as well as to various windowing systems (X11, Motif, Tk,
    Mac and MFC).

    Programmers can write new built-in modules for Python in C or C++.
    Python can be used as an extension language for applications that need
    a programmable interface. This package contains most of the standard
    Python modules.

    This package provides the "python" executable; most of the actual
    implementation is within the "python-libs" package.

PkgConfigBR:
    - libffi
    - ncursesw
    - openssl
    - sqlite3
PkgBR:
    - bzip2
    - bzip2-devel
    - db4-devel >= 4.8
    - gcc
    - gdbm-devel
    - make
    - pkgconfig
    - readline-devel
    - tar
Provides:
    - python-abi = %{pybasever}
Configure: configure
ConfigOptions:
    - --enable-ipv6
    - --enable-unicode=ucs4
    - --enable-shared
    - --with-system-ffi
Builder: make
Files:
    - "%defattr(-, root, root, -)"
    - "%doc LICENSE README"
    - "%{_bindir}/pydoc"
    - "%{_bindir}/python"
    - "%{_bindir}/python2"
    - "%{_bindir}/python%{pybasever}"
    - "%{_mandir}/*/*"
Check: no
SubPackages:
    - Name: libs
      Summary: Runtime libraries for Python
      Group: Applications/System
      Description: |
          This package contains runtime libraries for use by Python:
          - the libpython dynamic library, for use by applications that embed Python as
          a scripting language, and by the main "python" executable
          - the Python standard library
      Files:
          - "%defattr(-, root, root, -)"
          - "%dir %{pylibdir}"
          - "%dir %{dynload_dir}"
          - "%{dynload_dir}/Python-%{version}-py%{pybasever}.egg-info"
          - "#warning, hardwired SOVERSION 1.0"
          - "%{_libdir}/libpython%{pybasever}.so.1.0"
          -
          - "#this list is from the stdout of rpmbuild -bl ('provides...' section)."
          - "#note the 'module' disappeared from some names 2.7.1 to 2.7.2(?)."
          - "%{dynload_dir}/_bisect.so"
          - "%{dynload_dir}/_bsddb.so"
          - "%{dynload_dir}/_codecs_cn.so"
          - "%{dynload_dir}/_codecs_hk.so"
          - "%{dynload_dir}/_codecs_iso2022.so"
          - "%{dynload_dir}/_codecs_jp.so"
          - "%{dynload_dir}/_codecs_kr.so"
          - "%{dynload_dir}/_codecs_tw.so"
          - "%{dynload_dir}/_collections.so"
          - "%{dynload_dir}/_csv.so"
          - "%{dynload_dir}/_ctypes.so"
          - "%{dynload_dir}/_curses.so"
          - "%{dynload_dir}/_curses_panel.so"
          - "%{dynload_dir}/_elementtree.so"
          - "%{dynload_dir}/_functools.so"
          - "%{dynload_dir}/_hashlib.so"
          - "%{dynload_dir}/_heapq.so"
          - "%{dynload_dir}/_hotshot.so"
          - "%{dynload_dir}/_io.so"
          - "%{dynload_dir}/_json.so"
          - "%{dynload_dir}/_locale.so"
          - "%{dynload_dir}/_lsprof.so"
          - "%{dynload_dir}/_multibytecodec.so"
          - "%{dynload_dir}/_multiprocessing.so"
          - "%{dynload_dir}/_random.so"
          - "%{dynload_dir}/_socket.so"
          - "%{dynload_dir}/_sqlite3.so"
          - "%{dynload_dir}/_ssl.so"
          - "%{dynload_dir}/_struct.so"
          - "%{dynload_dir}/array.so"
          - "%{dynload_dir}/audioop.so"
          - "%{dynload_dir}/binascii.so"
          - "%{dynload_dir}/bz2.so"
          - "%{dynload_dir}/cPickle.so"
          - "%{dynload_dir}/cStringIO.so"
          - "%{dynload_dir}/cmath.so"
          - "%{dynload_dir}/crypt.so"
          - "%{dynload_dir}/datetime.so"
          - "%{dynload_dir}/dbm.so"
          - "%{dynload_dir}/dl.so"
          - "%{dynload_dir}/fcntl.so"
          - "%{dynload_dir}/future_builtins.so"
          - "%{dynload_dir}/gdbm.so"
          - "%{dynload_dir}/grp.so"
          - "%{dynload_dir}/imageop.so"
          - "%{dynload_dir}/itertools.so"
          - "%{dynload_dir}/linuxaudiodev.so"
          - "%{dynload_dir}/math.so"
          - "%{dynload_dir}/mmap.so"
          - "%{dynload_dir}/nis.so"
          - "%{dynload_dir}/operator.so"
          - "%{dynload_dir}/ossaudiodev.so"
          - "%{dynload_dir}/parser.so"
          - "%{dynload_dir}/pyexpat.so"
          - "%{dynload_dir}/readline.so"
          - "%{dynload_dir}/resource.so"
          - "%{dynload_dir}/select.so"
          - "%{dynload_dir}/spwd.so"
          - "%{dynload_dir}/strop.so"
          - "%{dynload_dir}/syslog.so"
          - "%{dynload_dir}/termios.so"
          - "%{dynload_dir}/time.so"
          - "%{dynload_dir}/unicodedata.so"
          - "%{dynload_dir}/zlib.so"
          -
          - "%dir %{pylibdir}/site-packages"
          - "%{pylibdir}/site-packages/README"
          - "%{pylibdir}/*.py*"
          -
          - "%dir %{pylibdir}/bsddb"
          - "%{pylibdir}/bsddb/*.py*"
          - "%{pylibdir}/pdb.doc"
          - "%{pylibdir}/compiler"
          - "%dir %{pylibdir}/ctypes"
          - "%{pylibdir}/ctypes/*.py*"
          - "%{pylibdir}/ctypes/macholib"
          - "%{pylibdir}/curses"
          - "%dir %{pylibdir}/distutils"
          - "%{pylibdir}/distutils/*.py*"
          - "%{pylibdir}/distutils/README"
          - "%{pylibdir}/distutils/command"
          - "%exclude %{pylibdir}/distutils/command/wininst-*.exe"
          - "%dir %{pylibdir}/email"
          - "%{pylibdir}/email/*.py*"
          - "%{pylibdir}/email/mime"
          - "%{pylibdir}/encodings"
          - "%{pylibdir}/hotshot"
          - "%{pylibdir}/idlelib"
          - "%exclude %{pylibdir}/idlelib/idle.bat"
          - "%{pylibdir}/importlib"
          - "%dir %{pylibdir}/json"
          - "%{pylibdir}/json/*.py*"
          - "%{pylibdir}/lib2to3"
          - "%{pylibdir}/logging"
          - "%{pylibdir}/multiprocessing"
          - "%{pylibdir}/plat-linux2"
          - "%{pylibdir}/pydoc_data"
          - "%dir %{pylibdir}/sqlite3"
          - "%{pylibdir}/sqlite3/*.py*"
          -
          - "#see -tests pkg for others"
          - "%dir %{pylibdir}/test"
          - "%{pylibdir}/test/test_support.py*"
          - "%{pylibdir}/test/__init__.py*"
          - "%{pylibdir}/unittest"
          - "%{pylibdir}/wsgiref"
          - "%{pylibdir}/xml"
          -
          - "%dir %{pylibdir}/config"
          - "%{pylibdir}/config/Makefile"
          - "%dir %{_includedir}/python%{pybasever}"
          - "#note: this config.h might only support 32 bit arch?"
          - "%{_includedir}/python%{pybasever}/pyconfig.h"

    - Name: test
      Summary: The test modules from the main python package
      Group: Development/Languages
      Description: |
          The test modules from the main python package: %{name}
          These have been removed to save space, as they are never or almost
          never used in production.

          You might want to install the python-test package if you're developing python
          code that uses more than just unittest and/or test_support.py.
      Files:
          - "%defattr(-, root, root, -)"
          -
          - "%{pylibdir}/bsddb/test"
          - "%{pylibdir}/ctypes/test"
          - "%{pylibdir}/distutils/tests"
          - "%{pylibdir}/email/test"
          - "%{pylibdir}/json/tests"
          - "%{pylibdir}/sqlite3/test"
          - "%{pylibdir}/test/*"
          - "# These two are shipped in the main package:"
          - "%exclude %{pylibdir}/test/test_support.py*"
          - "%exclude %{pylibdir}/test/__init__.py*"
          - "%{dynload_dir}/_ctypes_test.so"
          - "%{dynload_dir}/_testcapi.so"

    - Name: tools
      Summary: A collection of development tools included with Python
      Group: Development/Tools
      Description: |
          This package includes several tools to help with the development of Python
          programs, including IDLE (an IDE with editing and debugging facilities), a
          color editor (pynche), and a python gettext program (pygettext.py).
      Provides:
          - python2-tools = %{version}
      Obsoletes:
          - python2-tools < %{version}
      Files:
          - "%defattr(-, root, root, 755)"
          - "%{_bindir}/2to3"
          - "#no tkinter -> no idle?"
          - "%exclude %{_bindir}/idle"
          - "%{_bindir}/smtpd.py"

    - Name: devel
      Summary: The libraries and header files needed for Python development
      Group: Development/Libraries
      Description: |
          The Python programming language's interpreter can be extended with
          dynamically loaded extensions and can be embedded in other programs.
          This package contains the header files and libraries needed to do
          these types of tasks.

          Install python-devel if you want to develop Python extensions.  The
          python package will also need to be installed.  You'll probably also
          want to install the python-docs package, which contains Python
          documentation.
      Provides:
          - python2-devel = %{version}-%{release}
      Obsoletes:
          - python2-devel < %{version}-%{release}
      Files:
          - "%{_libdir}/pkgconfig/python-%{pybasever}.pc"
          - "%{_libdir}/pkgconfig/python2.pc"
          - "%{_libdir}/pkgconfig/python.pc"
          - "%{pylibdir}/config/*"
          - "#Makefile is included in the main pkg"
          - "%exclude %{pylibdir}/config/Makefile"
          - "%{pylibdir}/distutils/command/wininst-*.exe"
          - "%{_includedir}/python%{pybasever}/*.h"
          - "#pyconfig.h is included in the main pkg"
          - "%exclude %{_includedir}/python%{pybasever}/pyconfig.h"
          - "%{_bindir}/python%{pybasever}-config"
          - "%{_bindir}/python2-config"
          - "%{_bindir}/python-config"
          - "%{_libdir}/libpython%{pybasever}.so"

